/*
	Service Type Name :
		1.HTTPCRAWL
		2.HTTPPARSER
		3.URLFILTER
		4.URLPOOLLIST
		5.DNSLOOKUP
		6.STORAGE

*/
#include <curl.h>
#include <queue>
#include <dirent.h>		
#include <string>	
#include <pthread.h>

#include "globalFunc.h"
#include "sockFunc.h"

void Initial(SockInfo &Sock)
{
	Sock.portNum = 8888;
	Sock.addr = "120.126.17.108";
	
	Sock.sendBuff[SendBuffSize] = '\0';
	Sock.recvBuff[RecvBuffSize] = '\0';
}

int main(int argc, char **argv)
{	
	SockInfo Sock;
	int index = 0;
	Initial(Sock);
	StartService(Sock, "Client");
	
	
	//strcpy(Sock.sendBuff, "120.126.17.102");
	memcpy(&Sock.sendBuff[index], "req", 3);
	index += 3;
	memcpy(&Sock.sendBuff[index], "\t", 1);
	index += 1;
	memcpy(&Sock.sendBuff[index], "HTTPCRAWLER", 11);
	index += 11;
	memcpy(&Sock.sendBuff[index], "\t", 1);
	index += 1;
	memcpy(&Sock.sendBuff[index], "/home", 5);
	index += 5;
	memcpy(&Sock.sendBuff[index], "\0", 1);
	index += 1;
	//string tmpStr = "ClientAck";
	//Sock.sendBuff = tmpStr.c_str();
	
	
	Connect(Sock);
	RecvMessage(Sock, "Client");
	
	cout << Sock.recvBuff << endl;
	
	SendMessage(Sock, "Client");
	
	close(Sock.sockfd);
	
}
